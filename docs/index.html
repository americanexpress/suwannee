<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>suwannee</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">suwannee</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> suwannee</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="suwannee">Suwannee</h1>
				<p align="center">
					<img width="600" src="./assets/demo.svg">
				</p>
				<p>suwannee is a RESTful API to be used for blockchain connectivity. It has been tested and used to integrate with
					Hyperledger Fabric peers directly, as well as Blockchain-as-a-Service (BaaS) providers. Longer term plan is to
				facilitate integration with multiple Distributed Ledger (DLT) solutions, such as R3 Corda (coming soon).</p>
				<p>The goal of the framework is to enable direct smart contract calls from any programming language and/or platform.
				The obvious solution to the problem was to make it possible through RESTful calls.</p>
				<p>Here is an example of how to call suwannee APIs from client applications:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">"request"</span>);

<span class="hljs-keyword">var</span> options = { 
  <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://localhost:3001/api/blockchain'</span>,
  <span class="hljs-attr">qs</span>: 
   { <span class="hljs-attr">applicationId</span>: <span class="hljs-string">'marbles'</span>,
     <span class="hljs-attr">applicationContext</span>: <span class="hljs-string">'defaultChannel'</span>,
     <span class="hljs-attr">identity</span>: <span class="hljs-string">'bcUser'</span>,
     <span class="hljs-attr">functionName</span>: <span class="hljs-string">'getAll'</span> },
  <span class="hljs-attr">headers</span>: 
   { 
     <span class="hljs-attr">Authorization</span>: <span class="hljs-string">'Bearer eyJ0e...fojdRM'</span>
   } 
  };

request(options, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, response, body</span>) </span>{
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(error);

  <span class="hljs-built_in">console</span>.log(body);
});</code></pre>
				<p>The above request invokes <code>getAll</code> method of <code>marbles</code> smart contract (chaincode) that is deployed on channel
					<code>defaultChannel</code>. In this case the HTTP method used is GET, since it is a query, however, POST method is also
				available.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">var</span> options = {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
  <span class="hljs-attr">url</span>: <span class="hljs-string">'...'</span>,
  <span class="hljs-attr">headers</span>: 
   { ... },
  <span class="hljs-attr">body</span>: 
   { <span class="hljs-attr">applicationId</span>: <span class="hljs-string">'marbles'</span>,
     <span class="hljs-attr">applicationContext</span>: <span class="hljs-string">'defaultChannel'</span>,
     <span class="hljs-attr">identity</span>: <span class="hljs-string">'bcUser'</span>,
     <span class="hljs-attr">functionName</span>: <span class="hljs-string">'move'</span>,
     <span class="hljs-attr">functionArguments</span>: [ <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'10'</span> ] 
   },
};</code></pre>
				<p>Above example is for a chaincode &quot;Invoke&quot;. Since it&#39;s an update, Http method=POST. This example also shows how to pass arguments to the smart contract.</p>
				<h2 id="build-status">Build Status</h2>
				<p>At this point, the framework is capable of starting a REST service and connect to a Hyperledger Fabric peer or
				a GRPC service provided by a Blockchain-as-a-Service solution.</p>
				<p>One can perform effortlessly a chaincode &quot;Invoke&quot; or a &quot;Query&quot; without worrying about the back end.</p>
				<h3 id="prerequisites">Prerequisites</h3>
				<p>The prerequisites are:</p>
				<pre><code><span class="hljs-keyword">Node</span> <span class="hljs-title">v8</span>.<span class="hljs-number">15.0</span>
yarn</code></pre><h3 id="building-executables-with-the-source-code">Building executables with the source code</h3>
				<p>A step by step series of examples that tell you how to get a development env running</p>
				<p>Download and Install</p>
				<pre><code><span class="hljs-attr">git</span> <span class="hljs-string">clone repo_url</span>
<span class="hljs-attr">cd</span> <span class="hljs-string">suwannee</span>
<span class="hljs-attr">yarn</span>
<span class="hljs-attr">yarn</span> <span class="hljs-string">build</span>
<span class="hljs-attr">yarn</span> <span class="hljs-string">test</span>
<span class="hljs-attr">yarn</span> <span class="hljs-string">test:e2e ❗️</span>
<span class="hljs-attr">yarn</span> <span class="hljs-string">link</span>
<span class="hljs-meta">(optional)chmod</span> <span class="hljs-string">+x /usr/local/bin/suwannee</span></code></pre><h2 id="running-tests-and-eslint">Running tests and eslint</h2>
				<p>Running tests will generate coverage report , which you can find under <code>coverage</code> directory . Open <code>coverage/index.html</code> in your browser to see the report</p>
				<h3 id="all-tests">All Tests</h3>
				<p>Based on integration networks you have access to you can run following commands
				<code>yarn test</code></p>
				<h3 id="tslint">Tslint</h3>
				<p><code>yarn lint</code></p>
				<h4 id="documentation">Documentation</h4>
				<p><code>yarn docs</code></p>
				<p>Run above command to generate documentation. You can find documentation under <code>docs</code>directory. Open <code>docs/index.html</code>in you browser to see documentation.</p>
				<h2 id="usage">Usage</h2>
				<p><code>$ npm install --save suwannee</code>
					or
				<code>$ yarn add suwannee</code></p>
				<h2 id="to-start-the-rest-api">To start the Rest API</h2>
				<pre><code>$ suwannee  <span class="hljs-keyword">start</span> -c <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">path_to_config_file</span>&gt;</span></span></code></pre><h2 id="jwt-authentication">JWT Authentication</h2>
				<h4 id="key-generation">Key generation</h4>
				<p>Replace clientId with consumer id</p>
				<pre><code>$ ssh-keygen -t rsa -<span class="hljs-selector-tag">b</span> <span class="hljs-number">4096</span> -m PEM -f clientId<span class="hljs-selector-class">.key</span> -P <span class="hljs-string">""</span>
$ openssl rsa -<span class="hljs-keyword">in</span> clientId<span class="hljs-selector-class">.key</span> -pubout -outform PEM -out clientId<span class="hljs-selector-class">.key</span><span class="hljs-selector-class">.pub</span>
$ openssl base64 -<span class="hljs-keyword">in</span> clientId<span class="hljs-selector-class">.key</span><span class="hljs-selector-class">.pub</span> -out clientId<span class="hljs-selector-class">.encoded</span><span class="hljs-selector-class">.key</span><span class="hljs-selector-class">.pub</span></code></pre><h4 id="key-file-structure">Key File structure</h4>
				<pre><code>[
  {
    <span class="hljs-attr">"clientId"</span>: <span class="hljs-string">"consumer id"</span>,
    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"content of clientId.encoded.key.pub"</span>
  }
]</code></pre><h4 id="token-structure">Token structure</h4>
				<pre><code>HEADER:ALGORITHM &amp; TOKEN<span class="hljs-built_in"> TYPE
</span>
{
  <span class="hljs-string">"alg"</span>: <span class="hljs-string">"ES256"</span>,
  <span class="hljs-string">"typ"</span>: <span class="hljs-string">"JWT"</span>
}

PAYLOAD:Name of<span class="hljs-built_in"> client </span>&amp; The time the JWT was issued

{
<span class="hljs-string">"clientId"</span> : <span class="hljs-string">"nameofclient"</span>,
<span class="hljs-string">"iat"</span> : 1516239022
}

SIGNATURE : Generated <span class="hljs-keyword">while</span> signing
{
  xyz
}</code></pre><h4 id="token-generation">Token generation</h4>
				<pre><code>$ npm install -g jwtgen
$ jwtgen -<span class="hljs-selector-tag">a</span> RS256 -<span class="hljs-selector-tag">p</span> /path/to/clientId<span class="hljs-selector-class">.key</span> -c <span class="hljs-string">"clientId=consumerid"</span></code></pre><h4 id="authorization-header-format">Authorization Header format</h4>
				<p>Authorization : Bearer &lt; jwtToken &gt;</p>
				<h2 id="application-configuration">Application configuration</h2>
				<p><a href="./example.config.json">Here</a> is the structure of the config file.</p>
				<h2 id="-note-on-e2e-testing">❗️Note on e2e testing</h2>
				<p>To run end to end tests you would require connection_profile.json and creds in the folders &#39;.config&#39; and &#39;.wallet&#39; respectively which are need to be created under suwannee/.</p>
				<h2 id="known-limitations">Known limitations</h2>
				<ul>
					<li>Framework handles a single provider: Fabric</li>
					<li>Currently, deployment is supported for a single channel/chaincode</li>
				</ul>
				<h2 id="authors">Authors</h2>
				<ul>
					<li>Tajamul Fazili <a href="mailto:&#116;&#x61;&#x6a;&#x61;&#x6d;&#117;&#108;&#x2e;&#102;&#97;&#122;&#105;&#108;&#105;&#x40;&#97;&#101;&#120;&#x70;&#x2e;&#99;&#x6f;&#x6d;">&#116;&#x61;&#x6a;&#x61;&#x6d;&#117;&#108;&#x2e;&#102;&#97;&#122;&#105;&#108;&#105;&#x40;&#97;&#101;&#120;&#x70;&#x2e;&#99;&#x6f;&#x6d;</a> <a href="https://github.com/tajamulfazili">TajamuFazili</a></li>
					<li>Chandrakanth Mamillapalli <a href="https://github.com/chandrakanthm">chandrakanthm</a></li>
					<li>Andras L Ferenczi <a href="mailto:&#97;&#x6e;&#x64;&#114;&#97;&#115;&#46;&#108;&#46;&#x66;&#x65;&#114;&#101;&#110;&#99;&#x7a;&#x69;&#64;&#97;&#x65;&#x78;&#x70;&#x2e;&#x63;&#x6f;&#x6d;">&#97;&#x6e;&#x64;&#114;&#97;&#115;&#46;&#108;&#46;&#x66;&#x65;&#114;&#101;&#110;&#99;&#x7a;&#x69;&#64;&#97;&#x65;&#x78;&#x70;&#x2e;&#x63;&#x6f;&#x6d;</a> <a href="https://github.com/andrasfe">andrasfe</a></li>
				</ul>
				<h2 id="contributing">Contributing</h2>
				<p>We welcome Your interest in the American Express Open Source Community on Github. Any Contributor to any Open Source
					Project managed by the American Express Open Source Community must accept and sign an Agreement indicating agreement to
					the terms below. Except for the rights granted in this Agreement to American Express and to recipients of software
					distributed by American Express, You reserve all right, title, and interest, if any, in and to Your Contributions.
				Please <a href="https://cla-assistant.io/americanexpress/suwannee">fill out the Agreement</a>.</p>
				<p>Please feel free to open pull requests and see <code>CONTRIBUTING.md</code> for commit formatting details.</p>
				<h2 id="license">License</h2>
				<p>Any contributions made under this project will be governed by the <a href="LICENSE">Apache License 2.0</a>.</p>
				<h2 id="code-of-conduct">Code of Conduct</h2>
				<p>This project adheres to the <a href="CODE_OF_CONDUCT.md">American Express Community Guidelines</a>. By participating, you are
				expected to honor these guidelines.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_app_module_.html">"<wbr>App.module"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_app_service_.html">"<wbr>App.service"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_api_controller_.html">"api/<wbr>Api.controller"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_api_module_.html">"api/<wbr>Api.module"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_api_service_.html">"api/<wbr>Api.service"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_api_constants_.html">"api/api.constants"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_model_requestpayload_dto_.html">"api/model/<wbr>Request<wbr>Payload.dto"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_model_requestpayload_schema_.html">"api/model/<wbr>Request<wbr>Payload.schema"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_api_services_fabric_fabric_service_.html">"api/services/fabric/<wbr>Fabric.service"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_app_constants_.html">"app.constants"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_common_config_config_module_.html">"common/config/<wbr>Config.module"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_common_config_config_service_.html">"common/config/<wbr>Config.service"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_filters_httpexecption_filter_.html">"filters/<wbr>Http<wbr>Execption.filter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_main_.html">"main"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_middleware_jwt_middleware_.html">"middleware/<wbr>Jwt.middleware"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_middleware_jwt_middleware_constants_.html">"middleware/jwt.middleware.constants"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_pipe_joivalidation_pipe_.html">"pipe/<wbr>Joi<wbr>Validation.pipe"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_logging_log_service_.html">"utils/logging/<wbr>Log.service"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_logging_loggers_.html">"utils/logging/<wbr>Loggers"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>